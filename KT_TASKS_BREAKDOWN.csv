Area,Task,Priority,Complexity,Owner([Codex]|[Agency]|[Shared]),Artifacts,Acceptance
Tooling,Regenerate pnpm-lock.yaml and publish offline store,P0,Medium,[Codex],pnpm-lock.yaml; docs/SETUP_LOG.md entry,"`pnpm install --frozen-lockfile` succeeds locally and in CI without touching the public registry"
Database,Provide redacted DATABASE_URL_APP + DATABASE_URL_MIGRATE secrets for drift/deploy workflows,P0,Low,[Agency],GitHub environment secrets; 1Password entry,"`pnpm --filter apps/api prisma migrate status` runs in GitHub Actions without P1001 errors; secrets stored under Environments → production"
Agents,DONE – Wire ToolExecution persistence inside connector/tool runner,P0,Medium,[Codex],apps/api/src/services/tool-execution.service.ts; apps/api/src/connectors/factory.ts; tests/orchestrate.mock.spec.ts,"Executing an agent that calls a tool inserts at least one ToolExecution row with request/response metadata; jest smoke asserts it"
Testing,Quarantine or fix `keyword-research` + `setup-integration` Jest suites so orchestrator smoke stays green,P1,Medium,[Codex],apps/api/src/services/__tests__/keyword-research.service.test.ts; apps/api/src/__tests__/setup-integration.ts,"`USE_MOCK_CONNECTORS=true pnpm --filter @neonhub/backend-v3.2 test -- tests/orchestrate.mock.spec.ts tests/queue.mock.spec.ts --runInBand --coverage=false` exits 0"
CI,DONE – Apply PGOPTIONS + migrate retry + seed gating to db-deploy workflow,P1,Low,[Codex],.github/workflows/db-deploy.yml; ci/db-deploy.hardening.md,"Workflow shows PGOPTIONS env, wraps migrate deploy in retry loop, and defaults RUN_SEED to 'false'"
Security,Create least-privilege roles (neonhub_migrate/app/readonly) and rotate DSNs,P1,Medium,[Shared],docs/security/LEAST_PRIVILEGE_ROLES.md; Neon console audit,"`DATABASE_URL` uses neonhub_app role, `DIRECT_DATABASE_URL` uses neonhub_migrate, `READONLY_DATABASE_URL` optional but documented"
Database,Produce .tmp/db-drift.sql from production shadow DB for archive,P2,Low,[Agency],.tmp/db-drift.sql upload in repo,"`pnpm --filter @neonhub/backend-v3.2 exec prisma migrate diff --from-schema-datamodel prisma/schema.prisma --to-url "$DATABASE_URL" --script > .tmp/db-drift.sql` runs and file committed"
Queues,DONE – Add BullMQ worker smoke test that asserts queue metrics without Redis,P2,Medium,[Codex],tests/queue.mock.spec.ts; apps/api/src/queues/index.ts,"Test creates mock queue, pushes job, and asserts `queueJobsAdded`/`queueJobsPending` metrics updated"
